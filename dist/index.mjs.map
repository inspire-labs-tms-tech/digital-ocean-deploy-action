{"version":3,"sources":["../src/main.ts","../src/index.ts"],"sourcesContent":["import core from \"@actions/core\";\nimport axios from \"axios\";\n\n/**\n * The main function for the action.\n * @returns {Promise<void>} Resolves when the action is complete.\n */\nexport async function run(): Promise<void> {\n  try {\n    const apiKey = core.getInput(\"api-key\");\n    const appID = core.getInput(\"app-id\");\n    const _force = core.getInput(\"force\");\n    let force;\n    switch (_force) {\n      case \"true\":\n        force = true;\n        break;\n      case \"false\":\n        force = false;\n        break;\n      default:\n        throw new Error(`'force' must be (string) \"true\" or \"false\" (got '${_force}')`);\n    }\n\n    if (!apiKey) throw new Error(`'api-key' is falsy but required (is it defined?)`);\n    if (!appID) throw new Error(`'app-id' is falsy but required (is it defined?)`);\n\n    core.info(`attempting to deploy app '${appID}'`);\n\n    const endpoint = `https://api.digitalocean.com/v2/apps/${appID}/deployments`;\n    const response = await axios.post(endpoint, {\n      force_build: force\n    }, {\n      headers: {\n        \"Authorization\": `Bearer ${apiKey}`\n      }\n    });\n    const deploymentID = response.data.deployment?.id;\n    if (!deploymentID) throw new Error(\"failed to retrieve deployment ID\");\n    core.setOutput(\"deployment-id\", deploymentID);\n  } catch (e: any) {\n    core.setFailed(e.message);\n  }\n}","/**\n * The entrypoint for the action.\n */\nimport {run} from \"./main\";\n\nrun();"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,UAAU;AACjB,OAAO,WAAW;AAMlB,SAAsB,MAAqB;AAAA;AAP3C;AAQE,QAAI;AACF,YAAM,SAAS,KAAK,SAAS,SAAS;AACtC,YAAM,QAAQ,KAAK,SAAS,QAAQ;AACpC,YAAM,SAAS,KAAK,SAAS,OAAO;AACpC,UAAI;AACJ,cAAQ,QAAQ;AAAA,QACd,KAAK;AACH,kBAAQ;AACR;AAAA,QACF,KAAK;AACH,kBAAQ;AACR;AAAA,QACF;AACE,gBAAM,IAAI,MAAM,oDAAoD,MAAM,IAAI;AAAA,MAClF;AAEA,UAAI,CAAC;AAAQ,cAAM,IAAI,MAAM,kDAAkD;AAC/E,UAAI,CAAC;AAAO,cAAM,IAAI,MAAM,iDAAiD;AAE7E,WAAK,KAAK,6BAA6B,KAAK,GAAG;AAE/C,YAAM,WAAW,wCAAwC,KAAK;AAC9D,YAAM,WAAW,MAAM,MAAM,KAAK,UAAU;AAAA,QAC1C,aAAa;AAAA,MACf,GAAG;AAAA,QACD,SAAS;AAAA,UACP,iBAAiB,UAAU,MAAM;AAAA,QACnC;AAAA,MACF,CAAC;AACD,YAAM,gBAAe,cAAS,KAAK,eAAd,mBAA0B;AAC/C,UAAI,CAAC;AAAc,cAAM,IAAI,MAAM,kCAAkC;AACrE,WAAK,UAAU,iBAAiB,YAAY;AAAA,IAC9C,SAAS,GAAQ;AACf,WAAK,UAAU,EAAE,OAAO;AAAA,IAC1B;AAAA,EACF;AAAA;;;ACtCA,IAAI;","names":[]}